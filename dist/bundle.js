!function(t){var e={};function a(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=e,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(s,i,function(e){return t[e]}.bind(null,i));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";a.r(e);a(1);class s{constructor({id:t,title:e,text:a,priority:s,data:i,getTime:o,disabled:r,display:l,colorTask:d}){this.id=t,this.title=e,this.text=a,this.priority=s,this.data=i||this.createData(),this.getTime=o||(new Date).getTime(),this.disabled=r||"",this.display=l||"grid",this.colorTask=d||"red"}fillContentTask(){return`<div class="task__information-block">\n    <div class="task__header">\n      <h4 class="task__title">${this.title}</h4>\n      <p class="task__priority">${this.priority} priority</p>\n      <p class="task__data">${this.data}</p>\n    </div>\n    <p class="task__text">${this.text}</p>\n  </div>\n  <div class="task__setting">\n    <div class="task__modal">\n      <div class="task__modal-option task__modal-option_complete_green">\n        Complete\n      </div>\n      <div class="task__modal-option task__modal-option_edit_turquoise">\n        Edit\n      </div>\n      <div class="task__modal-option task__modal-option_delete_red">\n        Delete\n      </div>\n    </div>\n    <button id=${this.id} class="task__button" style="display:${this.display}">\n      <i class="fas fa-ellipsis-v"></i>\n    </button>\n  </div>`}createData(){let t=(new Date).getHours()+"",e=(new Date).getMinutes()+"",a=(new Date).getDate()+"",s=(new Date).getMonth()+1+"";const i=(new Date).getUTCFullYear();return 1===t.length&&(t="0"+t),1===e.length&&(e="0"+e),1===a.length&&(a="0"+a),1===s.length&&(s="0"+s),`${t}:${e} ${a}:${s}:${i}`}setColorTask(t){switch(t){case"Low":return"green";case"Medium":return"yellow";default:return"red"}}setDisabled(t){t?(this.display="none",this.disabled="disabled"):(this.display="grid",this.disabled="")}viewTask(t){return this.setDisabled(t),this.colorTask=this.setColorTask(this.priority),this.task=document.createElement("div"),this.task.className=`task task${this.id} task_${this.colorTask} task_${this.disabled}`,this.task.innerHTML=this.fillContentTask(),this.task}removeTask(){delete this.task}}const i=document.getElementById("wrapper"),o=new class{constructor(t){this.wrapper=t,this.arrayToDoTask=t.querySelector(".todo-section__array"),this.arrayComplectedTask=t.querySelector(".complected-section__array"),this.modalWindow=t.querySelector(".modal-window"),this.settingModal=t.querySelector(".setting__modal-window"),this.navbar=t.querySelector(".navbar"),this.toDoSectionHeader=t.querySelector(".todo-section__header"),this.complectedSectionHeader=t.querySelector(".complected-section__header")}initial(){this.writeToDoTask(0),this.writeCompletedTask(0)}viewArrayTask(t,e){if(t){for(;this.arrayToDoTask.children.length;)this.arrayToDoTask.children[0].remove();t.forEach(t=>this.arrayToDoTask.append(t.viewTask()))}if(e){for(;this.arrayComplectedTask.children.length;)this.arrayComplectedTask.children[0].remove();e.map(t=>this.arrayComplectedTask.append(t.viewTask(!0)))}this.taskModalsCollections=this.wrapper.querySelectorAll(".task__modal"),t&&this.writeToDoTask(t.length),e&&this.writeCompletedTask(e.length),this.setTasksLocalStorage(t,e)}writeToDoTask(t){this.toDoSectionHeader.textContent=this.toDoSectionHeader.textContent.slice(0,4)+` (${t})`}writeCompletedTask(t){this.complectedSectionHeader.textContent=this.complectedSectionHeader.textContent.slice(0,10)+` (${t})`}setTasksLocalStorage(t,e){localStorage.setItem("arrayToDo",JSON.stringify(t)),e&&localStorage.setItem("arrayComplected",JSON.stringify(e))}setColorTheme(t){this.wrapper.classList[1]&&this.wrapper.classList.remove(this.wrapper.classList[1]),this.wrapper.classList.add("wrapper__theme_"+t),this.navbar.classList[1]&&this.navbar.classList.remove(this.navbar.classList[1]),this.navbar.classList.add("navbar__theme_"+t),localStorage.setItem("colorTheme",t)}checkBoolean(t,e){e.style.display=t?"grid":""}viewModalWindow(t){this.checkBoolean(t,this.modalWindow)}viewTaskModal(t,e){if(this.taskModalsCollections){for(const t of this.taskModalsCollections)t.style.display="";this.taskModal=this.taskModalsCollections[e],this.taskModal&&this.checkBoolean(t,this.taskModal)}}setStateSettingModal(t){this.checkBoolean(t,this.settingModal)}}(i),r=new class{constructor(t){this.view=t,this.arrayToDoTask=[],this.arrayComplectedTask=[],this.idTask=1,this.modalWindow=!1,this.modalWindowForEdit=!1,this.taskModal=!1,this.currentClickTask=null,this.modalSetting=!1,this.colorTheme="light",this.currentClickTaskIndex=null,this.prevClickTaskIndex=null,this.idCurrentTask=null,this.idPrevTask=null}getTaskLocalStorage(t){Array.isArray(JSON.parse(localStorage.getItem("arrayToDo")))&&Array.isArray(JSON.parse(localStorage.getItem("arrayComplected")))&&(this.arrayToDoTask=JSON.parse(localStorage.getItem("arrayToDo")),this.arrayComplectedTask=JSON.parse(localStorage.getItem("arrayComplected")),this.arrayToDoTask=this.arrayToDoTask.map(t=>new s(t)),this.arrayComplectedTask=this.arrayComplectedTask.map(t=>new s(t))),this.view.viewArrayTask(this.arrayToDoTask,this.arrayComplectedTask),this.idTask=localStorage.getItem("idTask")||1;const e=localStorage.getItem("colorTheme")||"light";for(const a of t)a.value===e&&(a.checked=!0);this.setColorTheme(e)}createTask(t){if(t&&t[0].value&&t[1].value){const e=Array.from(t).find(t=>t.checked);if(this.modalWindowForEdit)this.currentClickTask.title=t[0].value,this.currentClickTask.text=t[1].value,this.currentClickTask.priority=e.value;else{const a={id:this.idTask++,title:t[0].value,text:t[1].value,priority:e.value},i=new s(a);this.arrayToDoTask=this.arrayToDoTask.concat(i),localStorage.setItem("idTask",this.idTask)}this.view.viewArrayTask(this.arrayToDoTask,this.arrayComplectedTask)}this.modalWindowForEdit=!1}toggleModalWindow(){this.modalWindow=!this.modalWindow,this.view.viewModalWindow(this.modalWindow)}setCurrentClickTask(t){this.currentClickTask=this.arrayToDoTask.find(e=>e.id===+t)}setCurrentTaskIndex(t){this.currentClickTaskIndex=this.arrayToDoTask.findIndex(e=>e.id===+t),this.idPrevTask=this.idCurrentTask,this.idCurrentTask=+t}toggleTaskModal(t,e){"task__button"===t&&this.idCurrentTask!==this.idPrevTask||"task__button"===t&&this.idCurrentTask===this.idPrevTask&&!1===this.taskModal?(e.stopPropagation(),this.taskModal=!0,this.view.viewTaskModal(this.taskModal,this.currentClickTaskIndex)):("wrapper"===t&&this.taskModal||"task__button"===t&&this.idCurrentTask===this.idPrevTask)&&(this.taskModal=!1,this.view.viewTaskModal(this.taskModal))}setStateSettingModal(){this.modalSetting=!this.modalSetting,this.view.setStateSettingModal(this.modalSetting)}setColorTheme(t){this.colorTheme=t,this.view.setColorTheme(this.colorTheme)}completeTask(){this.arrayToDoTask=this.arrayToDoTask.filter(t=>t.id!==this.currentClickTask.id),this.arrayComplectedTask=this.arrayComplectedTask.concat(this.currentClickTask),this.view.viewArrayTask(this.arrayToDoTask,this.arrayComplectedTask)}editTask(t){this.modalWindowForEdit=!0,this.toggleModalWindow(),t[0].value=this.currentClickTask.title,t[1].value=this.currentClickTask.text;for(const e of t)e.value===this.currentClickTask.priority&&(e.checked=!0)}removeTask(){this.arrayToDoTask=this.arrayToDoTask.filter(t=>t.id!==this.currentClickTask.id),this.view.viewArrayTask(this.arrayToDoTask)}setSortUpDate(){this.arrayToDoTask=this.arrayToDoTask.sort((t,e)=>(t.getDate,e.getDate,1)),this.view.viewArrayTask(this.arrayToDoTask)}setSortDownDate(){this.arrayToDoTask=this.arrayToDoTask.sort((t,e)=>t.getDate<e.getDate?1:-1),this.view.viewArrayTask(this.arrayToDoTask)}}(o),l=new class{constructor(t,e){this.model=t,this.wrapper=e,this.addTaskWrapper=e.querySelector(".add-task-wrapper"),this.modalWindow=e.querySelector(".modal-window"),this.addTask=e.querySelector(".add-task"),this.addTaskHederClose=e.querySelector(".add-task__header-close-button"),this.close=e.querySelector(".close"),this.addTaskToggle=e.querySelector(".add-task-toggle"),this.toDoArray=e.querySelector(".todo-section__array"),this.sortUpButton=e.querySelector(".sort__button_up"),this.sortDownButton=e.querySelector(".sort__button_down"),this.buttonSetting=e.querySelector(".setting__button"),this.themeToggle=e.querySelector(".color-theme-toggle__options")}initial(){this.addTaskWrapper.addEventListener("click",()=>this.model.toggleModalWindow()),this.modalWindow.addEventListener("click",()=>this.model.toggleModalWindow()),this.addTask.addEventListener("click",t=>t.stopPropagation()),this.addTaskHederClose.addEventListener("click",()=>this.model.toggleModalWindow()),this.close.addEventListener("click",()=>this.model.toggleModalWindow()),this.addTaskToggle.addEventListener("click",t=>this.handlerAddTaskToggle(t)),this.wrapper.addEventListener("click",t=>{"task__button"!==t.target.className&&this.model.toggleTaskModal("wrapper",t)}),this.toDoArray.addEventListener("click",t=>this.handleClickTask(t)),this.sortUpButton.addEventListener("click",()=>this.model.setSortUpDate()),this.sortDownButton.addEventListener("click",()=>this.model.setSortDownDate()),this.buttonSetting.addEventListener("click",()=>this.model.setStateSettingModal()),this.themeToggle.addEventListener("click",t=>this.handleChooseTheme(t)),this.getTaskLocalStorage()}handlerAddTaskToggle(t){t.preventDefault();const e=this.addTask.querySelectorAll("input");e[0].value&&e[1].value&&(this.model.createTask(e),this.model.toggleModalWindow(),e[0].value="",e[1].value="")}handleClickTask(t){"task__button"===t.target.className?(this.model.setCurrentClickTask(t.target.id),this.model.setCurrentTaskIndex(t.target.id),this.model.toggleTaskModal("task__button",t)):"Complete"===t.target.innerHTML.trim()?this.model.completeTask():"Edit"===t.target.innerHTML.trim()?this.model.editTask(this.addTask.querySelectorAll("input")):"Delete"===t.target.innerHTML.trim()&&this.model.removeTask()}handleChooseTheme(t){t.target.value&&this.model.setColorTheme(t.target.value)}getTaskLocalStorage(){const t=this.themeToggle.querySelectorAll("input");this.model.getTaskLocalStorage(t)}}(r,i);o.initial(),l.initial()},function(t,e){}]);
//# sourceMappingURL=bundle.js.map